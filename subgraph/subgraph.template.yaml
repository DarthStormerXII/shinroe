specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: ScoreRegistry
    network: {{network}}
    source:
      address: "{{scoreRegistry.address}}"
      abi: ScoreRegistry
      startBlock: {{scoreRegistry.startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - User
        - ScoreUpdate
        - ProfileUpdate
        - GlobalStats
        - DailyStats
      abis:
        - name: ScoreRegistry
          file: ./abis/ScoreRegistry.json
      eventHandlers:
        - event: ScoreRegistered(indexed address,bytes32,uint256)
          handler: handleScoreRegistered
        - event: ScoreUpdated(indexed address,bytes32,bytes32,uint256)
          handler: handleScoreUpdated
        - event: VisibilityChanged(indexed address,bool)
          handler: handleVisibilityChanged
        - event: ProfileUpdated(indexed address,string)
          handler: handleProfileUpdated
      file: ./src/mappings/score-registry.ts

  - kind: ethereum
    name: EndorsementVault
    network: {{network}}
    source:
      address: "{{endorsementVault.address}}"
      abi: EndorsementVault
      startBlock: {{endorsementVault.startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - User
        - Endorsement
        - EndorsementEvent
        - GlobalStats
        - DailyStats
      abis:
        - name: EndorsementVault
          file: ./abis/EndorsementVault.json
      eventHandlers:
        - event: EndorsementCreated(indexed uint256,indexed address,indexed address,uint8,uint256,uint256)
          handler: handleEndorsementCreated
        - event: EndorsementWithdrawn(indexed uint256,indexed address,uint256)
          handler: handleEndorsementWithdrawn
        - event: EndorsementSlashed(indexed uint256,uint256)
          handler: handleEndorsementSlashed
      file: ./src/mappings/endorsement-vault.ts

  - kind: ethereum
    name: BadgeNFT
    network: {{network}}
    source:
      address: "{{badgeNFT.address}}"
      abi: BadgeNFT
      startBlock: {{badgeNFT.startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - User
        - UserBadge
        - BadgeEvent
        - GlobalStats
        - DailyStats
      abis:
        - name: BadgeNFT
          file: ./abis/BadgeNFT.json
      eventHandlers:
        - event: BadgeMinted(indexed address,indexed uint8,uint256)
          handler: handleBadgeMinted
        - event: BadgeRevoked(indexed address,indexed uint8,uint256)
          handler: handleBadgeRevoked
      file: ./src/mappings/badge-nft.ts

  - kind: ethereum
    name: TokenFactory
    network: {{network}}
    source:
      address: "{{tokenFactory.address}}"
      abi: TokenFactory
      startBlock: {{tokenFactory.startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Token
        - AirdropStats
      abis:
        - name: TokenFactory
          file: ./abis/TokenFactory.json
      eventHandlers:
        - event: TokenCreated(indexed address,indexed address,string,string,uint256)
          handler: handleTokenCreated
      file: ./src/mappings/token-factory.ts

  - kind: ethereum
    name: AirdropVault
    network: {{network}}
    source:
      address: "{{airdropVault.address}}"
      abi: AirdropVault
      startBlock: {{airdropVault.startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Airdrop
        - AirdropClaim
        - Token
        - AirdropStats
      abis:
        - name: AirdropVault
          file: ./abis/AirdropVault.json
      eventHandlers:
        - event: AirdropCreated(indexed uint256,indexed address,address)
          handler: handleAirdropCreated
        - event: AirdropClaimed(indexed uint256,indexed address,uint256)
          handler: handleAirdropClaimed
        - event: AirdropCancelled(indexed uint256)
          handler: handleAirdropCancelled
      file: ./src/mappings/airdrop-vault.ts
